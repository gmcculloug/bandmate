<div class="page-header">
    <div>
        <h2 class="page-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -4px; margin-right: 8px;">
                <path d="M3 12h18m-9-9v18"></path>
                <circle cx="12" cy="12" r="10"></circle>
            </svg>
            Practice Scheduling
        </h2>
        <p style="color: #718096; margin: 5px 0 0 0;">Schedule practice sessions and coordinate band member availability.</p>
    </div>
    <div class="page-actions">
        <a href="/practices/new" class="btn btn-success">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 6px;">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="16"></line>
                <line x1="8" y1="12" x2="16" y2="12"></line>
            </svg>
            Schedule Practice
        </a>
    </div>
</div>

<% if @active_practices.any? || @archived_practices_count > 0 %>
    <!-- Active Practice Sessions -->
    <% if @active_practices.any? %>
        <div style="margin-bottom: 40px;">
            <h3 style="margin-bottom: 20px; color: #2d3748;">Active Practice Sessions</h3>
            <% @active_practices.each do |practice| %>
                <div class="set-list-item" style="cursor: pointer;" onclick="window.location.href='/practices/<%= practice.id %>'">
                    <div class="set-list-info">
                        <h3 style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                            <span style="flex: 1; min-width: 200px;">
                                <span style="font-weight: normal; color: #718096; font-size: 0.9em;">
                                    <%= practice.formatted_week_range %> -
                                </span>
                                <%= practice.title.present? ? practice.title : "Practice" %>
                            </span>
                            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                                <span style="background: rgba(102, 126, 234, 0.1); color: #667eea; padding: 4px 8px; border-radius: 12px; font-size: 0.8em; font-weight: 500;">
                                    <%= practice.response_count %>/<%= practice.total_band_members %> responded
                                </span>
                                <% if practice.best_day %>
                                    <span style="background: rgba(56, 161, 105, 0.1); color: #38a169; padding: 4px 8px; border-radius: 12px; font-size: 0.8em; font-weight: 500;">
                                        <%= practice.status == 'finalized' ? 'Selected' : 'Best' %>: <%= practice.best_day %>
                                    </span>
                                <% end %>
                                <% if practice.status == 'active' && practice.possible_dates_display %>
                                    <span style="background: rgba(102, 126, 234, 0.1); color: #667eea; padding: 4px 8px; border-radius: 12px; font-size: 0.8em; font-weight: 500;">
                                        Possible: <%= practice.possible_dates_display %>
                                    </span>
                                <% end %>
                            </div>
                        </h3>
                        <% if practice.description.present? %>
                            <p style="color: #718096; margin: 5px 0 0 0; font-size: 0.9em;">
                                <%= practice.description %>
                            </p>
                        <% end %>
                        <p style="color: #718096; margin: 5px 0 0 0; font-size: 0.8em;">
                            Created by <%= practice.created_by_user.username %>
                        </p>
                    </div>
                </div>
            <% end %>
        </div>
    <% end %>

    <!-- Past Practices Link -->
    <% if @archived_practices_count > 0 %>
        <div style="text-align: center; margin-top: 30px;">
            <a href="/practices/past" class="btn" style="background: none; border: 1px solid #e2e8f0; color: #4a5568; padding: 10px 20px; border-radius: 6px; text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2v6l4-4-4-4z"></path>
                    <path d="M21 12a9 9 0 11-9-9"></path>
                </svg>
                Past Practices (<%= @archived_practices_count %>)
            </a>
        </div>
    <% end %>
<% else %>
    <div class="card" style="text-align: center; padding: 60px 20px;">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 20px auto; color: #a0aec0;">
            <path d="M3 12h18m-9-9v18"></path>
            <circle cx="12" cy="12" r="10"></circle>
        </svg>
        <h3 style="color: #4a5568; margin-bottom: 10px;">No Practice Sessions Yet</h3>
        <p style="color: #718096; margin-bottom: 30px;">Schedule your first practice session to coordinate with your band members.</p>
        <a href="/practices/new" class="btn btn-success">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 6px;">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="16"></line>
                <line x1="8" y1="12" x2="16" y2="12"></line>
            </svg>
            Schedule First Practice
        </a>
    </div>
<% end %>