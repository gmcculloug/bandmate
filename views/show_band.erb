<div class="page-header">
    <h2 class="page-title">🎸 <%= @band.name %></h2>
    <div class="page-actions">
        <% if @band.users.include?(current_user) %>
            <a href="/bands/<%= @band.id %>/edit" class="btn">Edit</a>
            <% if @band.owned_by?(current_user) %>
                <form method="POST" action="/bands/<%= @band.id %>" style="display: inline;">
                    <input type="hidden" name="_method" value="DELETE">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this band? This action cannot be undone and will remove all songs and gigs.')">Delete Band</button>
                </form>
            <% end %>
        <% end %>
        <a href="/profile" class="btn">Back to Settings</a>
    </div>
</div>

<% if @band.notes.present? %>
    <div style="margin-bottom: 20px; padding: 15px; background: #f7fafc; border-radius: 8px;">
        <h4>Notes</h4>
        <p><%= @band.notes %></p>
    </div>
<% end %>

<% if params[:copied].present? %>
    <div class="message message--success">
        Successfully copied <%= params[:copied] %> song<%= params[:copied].to_i == 1 ? '' : 's' %> to <%= @band.name %>!
    </div>
<% end %>

<% if params[:venues_copied].present? %>
    <div class="message message--success">
        Successfully copied <%= params[:venues_copied] %> venue<%= params[:venues_copied].to_i == 1 ? '' : 's' %> to <%= @band.name %>!
    </div>
<% end %>

<div class="card" style="margin-bottom: 30px;">
    <div class="card-header">
        <h3 class="card-title">👥 Band Members (<%= @band.users.count %>)</h3>
        <div class="card-actions">
            <a href="/bands/<%= @band.id %>/edit" class="btn">➕ Manage Members</a>
        </div>
    </div>

    <% if @band.users.any? %>
        <div style="margin-bottom: 15px;">
            <% @band.users.order(:username).each do |user| %>
                <div class="user-card" style="margin-bottom: 8px; padding: 10px; border: 1px solid #e2e8f0; border-radius: 6px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; font-size: 1rem;">
                                <%= user.username %>
                                <% if user == current_user %>
                                    <span style="background: #667eea; color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.75rem; margin-left: 8px;">You</span>
                                <% end %>
                                <% if user == @band.owner %>
                                    <span style="background: #f59e0b; color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.75rem; margin-left: 8px;">👑 Owner</span>
                                <% end %>
                            </div>
                            <div style="margin-top: 4px; font-size: 0.85rem; color: #4a5568;">
                                Member since <%= user.user_bands.find_by(band: @band)&.created_at&.strftime('%B %Y') || 'Unknown' %>
                            </div>
                        </div>
                    </div>
                </div>
            <% end %>
        </div>
    <% else %>
        <div style="text-align: center; padding: 40px;">
            <h3>No members yet</h3>
            <p>Add some members to get started!</p>
            <a href="/bands/<%= @band.id %>/edit" class="btn btn-success">Add Members</a>
        </div>
    <% end %>
</div>

<div class="card" style="margin-top: 30px;">
    <div class="card-header">
        <h3 class="card-title">🎤 Gigs (<%= @band.gigs.count %>)</h3>
        <% if @band.gigs.any? %>
            <div class="card-actions">
                <a href="/gigs" class="btn">View All Gigs</a>
            </div>
        <% end %>
    </div>

    <% unless @band.gigs.any? %>
        <div style="text-align: center; padding: 40px;">
            <h3>No gigs for this band yet</h3>
            <p>Create a gig to get started!</p>
        </div>
    <% end %>
</div>

<div class="card" style="margin-top: 30px;">
    <div class="card-header">
        <h3 class="card-title">🏛️ Venues (<%= @band.venues.count %>)</h3>
        <div class="card-actions">
            <% if @band.venues.any? %>
                <a href="/venues" class="btn">View All Venues</a>
            <% end %>
            <% if current_user.bands.count > 1 %>
                <a href="/bands/<%= @band.id %>/copy_venues" class="btn">📋 Copy from Other Bands</a>
            <% end %>
        </div>
    </div>

    <% unless @band.venues.any? %>
        <div style="text-align: center; padding: 40px;">
            <h3>No venues for this band yet</h3>
            <p>Add some venues to get started!</p>
        </div>
    <% end %>
</div>

<div class="card" style="margin-top: 30px;">
    <div class="card-header">
        <h3 class="card-title">🎵 Songs (<%= @band.songs.count %>)</h3>
        <div class="card-actions">
            <% if @band.songs.any? %>
                <a href="/songs" class="btn">View All Songs</a>
            <% end %>
            <a href="/bands/<%= @band.id %>/copy_songs" class="btn">📋 Copy from Global Library</a>
        </div>
    </div>

    <% unless @band.songs.any? %>
        <div style="text-align: center; padding: 40px;">
            <h3>No songs for this band yet</h3>
            <p>Add some songs to get started!</p>
        </div>
    <% end %>
</div>

 