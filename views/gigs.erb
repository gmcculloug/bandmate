<div class="page-header">
    <div>
        <h2 class="page-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -4px; margin-right: 8px;">
                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
            </svg>
            Gigs
            <% if @upcoming_gigs && @upcoming_gigs.any? %>
                <span style="font-weight: normal; color: #718096; font-size: 0.8em; margin-left: 8px;">
                    (<%= @upcoming_gigs.count %> upcoming)
                </span>
            <% end %>
        </h2>
        <p style="color: #718096; margin: 5px 0 0 0;">Welcome to Band Huddle! Manage your gigs, songs, and performances.</p>
    </div>
    <div class="page-actions">
        <a href="/gigs/new" class="btn btn-success">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 6px;">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="16"></line>
                <line x1="8" y1="12" x2="16" y2="12"></line>
            </svg>
            Create New Gig
        </a>
    </div>
</div>



<% if @upcoming_gigs.any? || @past_gigs_count > 0 %>
    <!-- Upcoming Gigs Section -->
    <% if @upcoming_gigs.any? %>
        <div style="margin-bottom: 40px;">
            <% @upcoming_gigs.each do |set_list| %>
                <div class="set-list-item" style="cursor: pointer;" onclick="window.location.href='/gigs/<%= set_list.id %>'">
                    <div class="set-list-info">
                        <h3 style="display: flex; align-items: center; gap: 10px;">
                            <span style="flex: 1;">
                                <% if set_list.performance_date.present? %>
                                    <span style="font-weight: normal; color: #718096; font-size: 0.9em;">
                                        <%= set_list.performance_date.strftime('%a, %b %d') %> -
                                    </span>
                                <% end %>
                                <%= set_list.name %>
                                <% if set_list.start_time.present? %>
                                    <span style="font-weight: normal; color: #718096; font-size: 0.9em;">
                                        - <%= set_list.start_time.strftime('%I:%M %p') %>
                                        <% if set_list.end_time.present? %>
                                            - <%= set_list.end_time.strftime('%I:%M %p') %>
                                        <% end %>
                                    </span>
                                <% end %>
                            </span>
                            <% if set_list.songs.any? %>
                                <a href="/gigs/<%= set_list.id %>/gig_mode" target="_blank" class="gig-mode-button" onclick="event.stopPropagation();" style="display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; background: white; border: 1px solid #e2e8f0; border-radius: 6px; text-decoration: none; color: #4a5568; transition: all 0.2s; flex-shrink: 0; margin-right: 4px;" onmouseover="this.style.backgroundColor='#667eea'; this.style.borderColor='#5a67d8'; this.style.color='white';" onmouseout="this.style.backgroundColor='white'; this.style.borderColor='#e2e8f0'; this.style.color='#4a5568';" title="Gig Mode - Offline Performance View">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                                        <line x1="8" y1="21" x2="16" y2="21"></line>
                                        <line x1="12" y1="17" x2="12" y2="21"></line>
                                        <circle cx="12" cy="10" r="3"></circle>
                                    </svg>
                                </a>
                                <a href="/gigs/<%= set_list.id %>/print" target="_blank" class="print-icon-button" onclick="event.stopPropagation();" style="display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; background: white; border: 1px solid #e2e8f0; border-radius: 6px; text-decoration: none; color: #4a5568; transition: all 0.2s; flex-shrink: 0;" onmouseover="this.style.backgroundColor='#667eea'; this.style.borderColor='#5a67d8'; this.style.color='white';" onmouseout="this.style.backgroundColor='white'; this.style.borderColor='#e2e8f0'; this.style.color='#4a5568';" title="Print Gig">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="6,9 6,2 18,2 18,9"></polyline>
                                        <path d="M6,18H4a2,2 0,0,1-2-2V11a2,2 0,0,1,2,2H20a2,2 0,0,1,2,2v5a2,2 0,0,1-2,2H18"></path>
                                        <polyline points="6,14 18,14 18,20 6,20 6,14"></polyline>
                                    </svg>
                                </a>
                            <% end %>
                        </h3>
                        <% if set_list.notes.present? %>
                            <p style="font-style: italic; color: #718096;"><%= set_list.notes %></p>
                        <% end %>
                    </div>
                </div>
            <% end %>
        </div>
    <% end %>

    <!-- Past Gigs Link -->
    <% if @past_gigs_count > 0 %>
        <div style="text-align: center; margin-top: 30px;">
            <a href="/gigs/past" class="btn" style="background: none; border: 1px solid #e2e8f0; color: #4a5568; padding: 10px 20px; border-radius: 6px; text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2v6l4-4-4-4z"></path>
                    <path d="M21 12a9 9 0 11-9-9"></path>
                </svg>
                Past Gigs (<%= @past_gigs_count %>)
            </a>
        </div>
    <% end %>

    <!-- No upcoming gigs message -->
    <% if @upcoming_gigs.empty? && @past_gigs_count > 0 %>
        <div class="card" style="margin-bottom: 40px;">
            <h3>No upcoming gigs scheduled</h3>
            <p>All your gigs are in the past. Create a new gig to schedule your next performance.</p>
            <a href="/gigs/new" class="btn btn-success">Create New Gig</a>
        </div>
    <% end %>
<% else %>
    <div class="card">
        <h3>No gigs yet!</h3>
        <p>Create your first gig to start organizing your songs for performances.</p>
        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 15px;">
            <a href="/gigs/new" class="btn btn-success">Create Your First Gig</a>
            <a href="/songs/new" class="btn">Add Your First Song</a>
            <a href="/venues/new" class="btn">Add Your First Venue</a>
        </div>
    </div>
<% end %> 